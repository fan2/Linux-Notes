
## [Shell 字符串截取方法](https://blog.csdn.net/qq_33951180/article/details/68059098)

### 截左留右

`#` 和 `##` 号截断左边留取右边子串（非贪婪模式，贪婪模式） 
表达式 | 含义
---------|----------
`${string#substring}`	| 从变量 $string 的开头, 删除最短匹配 $substring 的子串
`${string##substring}`	| 从变量 $string 的开头, 删除最长匹配 $substring 的子串

> 其中 substring 可以是一个正则表达式。

```
$ file_path=/Users/faner/Downloads/iosdeploy_download/Documents/2905558360/image_original_flash
$ suffix=${file_path#*iosdeploy_download}
$ echo $suffix
/Documents/2905558360/image_original_flash
```

### 截右留左

`%` 和 `%%` 号截断右边留取左边子串（非贪婪模式，贪婪模式） 
表达式 | 含义
---------|----------
`${string%substring}`	| 从变量 $string 的结尾, 删除最短匹配 $substring的子串
`${string%%substring}`	| 从变量 $string 的结尾, 删除最长匹配 $substring 的子串

> 其中 substring 可以是一个正则表达式。

```
$ file_path=/Users/faner/Downloads/iosdeploy_download/Documents/2905558360/image_original_flash
$ prefix=${file_path%/Documents/*}
$ echo $prefix
/Users/faner/Downloads/iosdeploy_download
```

### refs

[bash shell字符串的截取](https://www.cnblogs.com/liuweijian/archive/2009/12/27/1633661.html)  
[Shell字符串截取](http://c.biancheng.net/view/1120.html) - 非常详细  
[shell截取字符串的方法](https://www.jianshu.com/p/4ceca1a2d265)  

## [Shell脚本8种字符串截取方法总结](https://www.jb51.net/article/56563.htm)

### refs

[Linux Shell 截取字符串](https://www.cnblogs.com/fengbohello/p/5954895.html)  
[linux shell 字符串操作详解](https://www.iteye.com/blog/justcoding-1963463)  

长度，读取，替换，截取，连接，对比，删除，位置

## extract substring

[Extract word from string using grep/sed/awk](https://askubuntu.com/questions/697120/extract-word-from-string-using-grep-sed-awk)

[How to extract string following a pattern with grep, regex or perl](https://stackoverflow.com/questions/5080988/how-to-extract-string-following-a-pattern-with-grep-regex-or-perl)

从 `ios-deploy -c` 执行结果中提取 udid：

```
faner@FAN-MB1 ~ » ios_device=`ios-deploy -c`
faner@FAN-MB1 ~ » udid=`echo $ios_device | awk -F "Found " '{sub(/ .*/, "", $2);print$2}'`
faner@FAN-MB1 ~ » echo $udid

ddffc8d6d298d156f23b8d8a71f4e3397c387d01
```

改进：先基于 sed [提取第二行](https://blog.csdn.net/WMSOK/article/details/78463199)：

```
faner@FAN-MB1 ~ » second_line=`echo $ios_device | sed -n 'n;p'`
faner@FAN-MB1 ~ » echo $second_line
[....] Found ddffc8d6d298d156f23b8d8a71f4e3397c387d01 (N61AP, iPhone 6 (GSM), iphoneos, arm64) a.k.a. 'iPhone 6 ios10.1.1' connected through USB.

faner@FAN-MB1 ~ » udid=`echo $second_line | awk -F "Found " '{sub(/ .*/, "", $2);print$2}'`
faner@FAN-MB1 ~ » echo $udid
ddffc8d6d298d156f23b8d8a71f4e3397c387d01
faner@FAN-MB1 ~ » echo ${#udid}
40
```

**最简写法**：`ios-deploy -c | awk '/Found/{print $3}'`，正则匹配包含 `Found` 的第2行，然后打印基于空格分割的 field 3。

---

awk 中的 `sub` 和 `substr` 函数？？？

```
echo 'This is a test' | awk '{print substr($0, index($0,$3))}'
```

### [关于使用shell在文件中查找一段字符串的问题](https://bbs.csdn.net/topics/380208443)

将 AAA 替换为空（移除）：

```
$ echo "12312312343242AAAdfasdfasdfasdfasdfadAAAfsdgfsdfgfgfgdfgasdfg"|sed -e 's/AAA//g'
```

AAA 前半部分

```
$ echo "12312312343242AAAdfasdfasdfasdfasdfadAAAfsdgfsdfgfgfgdfgasdfg"|awk -F"AAA" '{print $1}'
```

AAA 后半部分

```
$ echo "12312312343242AAAdfasdfasdfasdfasdfadAAAfsdgfsdfgfgfgdfgasdfg"|awk -F"AAA" '{print $2}'
```

### [shell 查找字符串中字符出现的位置](https://www.cnblogs.com/sea-stream/p/11403014.html)

```
$ test="cat"
$ a="The cat sat on the mat"
$ index=`awk -v a="$a" -v b="$test" 'BEGIN{print index(a,b)}'`
$ echo $index
5
```

### [shell脚本查找、抽取指定字符串的方法](https://blog.csdn.net/u011006622/article/details/85048488)

grep, sed, awk, cut
